---
title: Java核心技术——Java基础
date: 2019-06-07 20:52:30
tags: [Java，读书笔记]
categories: 核心技术读书笔记
---
1. 利用编译器生成平台无关的字节码，实现"一次编译，处处运行"；为了解决解释虚拟机指令比运行机器指令慢的问题，新增了**即时编译**（`JIT`）技术，可以将执行最频繁的字节码翻译成机器码。

2. `Java`编码问题：分为**`JVM`之外**和**`JVM`之内**进行讨论。
   ①`JVM`之外：包括`Java`源文件(`.java`)和编译后的`.class`文件，源文件可以采用多种编码格式如`utf-8`(`Unix`、`Linux`平台默认) 或者`gbk`(`Windows`平台默认)，当将源码用`javac`编译的时候，**默认是`javac`命令按照系统默认的编码格式读取`Java`源文件，然后以`utf-8`的格式输出到`.class`文件中**，换句话说，在默认情况下（`Unix`平台），`javac`用`utf-8`格式读取`Java`源文件，然后以`utf-8`格式写`.class`；在默认情况下（`Windows`平台），`javac`用`gbk`格式读取`Java`源文件，然后以`utf-8`格式写`.class`。但是如果说源文件的编码格式不采用操作系统默认格式呢？如在`Windows`平台下用`utf-8`格式保存`java`源文件(一般`IDE`中都有选项选择文件保存编码格式)，如果不采用`IDE`，直接用`javac`编译该源文件，则会造成乱码。

   ②`JVM`之内：当运行`java`字节码时，读入到内存里的字符或者字符串都用`char`或`char[]`表示，而`char`是采用`utf-16`的，**但不是真正的`utf-16`（不能标识超过两个字节的字符）**，为什么这样说?` char`在`Java`里一直是16位的，也就是说只能表示带`utf-16`的`0x0000-0xFFFF`(`BMP basic multilingual plane)`为止，当对于超过16位的`utf-16`字符来说(比如表情符号)就需要多个`char`了。

3. `Java`是编译型语言还是解释性语言？

   **编译型语言**：在程序运行之前，有一个单独的编译过程，将程序翻译成机器语言，以后执行这个程序时，就不用再进行翻译了。

   **解释型语言**：是在运行的时候将程序翻译成机器语言，所以运行速度相对于编译型语言要慢。

   虽然`Java`的第一道工序是`javac`编译，其目标文件是`ByteCode`，而并非机器语言，但后续可能有三种处理方式：

   ​	①运行时，`ByteCode`由`JVM`逐条送给解释器，解释器将字节码翻译成机器码运行。

   ​	②运行时，部分`ByteCode`可能由实时编译器（`Just In Time Compiler，JIT`）编译为目标机器码再执行（以`method`为编译单位，还会保存起来，第二次执行就不用再翻译为机器码了），有些`JVM`是采用纯`JIT`编译方式实现的，其内部没有解释器，例如：`JRockit`、`Maxine VM`。是根据运行时信息确定哪些常用代码可以使用`JIT`。

   ​	③继`javac`之后执行`AOT`二次编译，在程序开始运行前就生成静态的目标平台机器码。

   ​	有的时候，可能是以上三种方式同时在使用，至少1和2是同时使用的，3则需要程序员手工指定。所以，我认为`Java`是**编译与解释两者之间的混合式语言**。

4. 基本数据类型：`int`、`byte`、`short`、`long`、`float`、`double`、`boolean`、`char`。

5. 对于方法内部声明的基本数据类型，是存在栈中的；对于作为成员变量的基本数据类型，是存在堆中的；对于作为类中静态成员变量的基本数据类型，是存在方法区中的。

6. `final`的基本含义是某个变量（此时也可以成为常量）只能**赋值一次**，`final`修饰基本数据类型，初始化后不能进行修改；修饰对象，初始化后不能指向其他对象，但对象的值可以改变。

7. `int`和`long`转`float`，以及`long`转`double`可能出现精度损失。

8. 对于 **`x+=4.1`** 这类运算，如果运算得到的结果与左侧操作数的类型不一致，则会发生强制类型转换。

9. `join`方法将多个字符串拼接在一起，并用特定分隔符进行分隔。

10. 在`foreach`循环中，对于基本数据类型的赋值操作不起作用，对于**对象数组**，进行元素的增删会抛出异常，但是可以进行某个元素的修改。**`ConcurrentModificationException`**

